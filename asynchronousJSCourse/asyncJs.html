<!DOCTYPE html>
<html lang="en">
    <head>
        <title>
            Async Js
        </title>
        <meta charset="UTF-8">

        <body style="background-color: black; display: flex; justify-content: center; align-items: center;">
            <h1 style="background-color: black; color: white;">Async Js</h1>

            <script>


                let stocks = {
                         Fruit: ["strawberry", "grapes","banana", "apple"],
                         liquid: ["water", "ice"],
                        holder: ["cone","cup","stick"],
                        toppings: ["chocolate", "peanuts"],
                            };

                let isShopOpen = false;
                

                //first is to create a time function that serves as a relationship between time and work
                function time(ms) {
                    return new Promise( (resolve, reject )=>{
                        if(isShopOpen) {
                            setTimeout(resolve,ms);
                        }
                        else {
                            reject(console.log("shop is closed"))
                        }
                    } )
                }






                // this function executes the steps with the await time function
                

                async function kitchen() {
                    try {
                        await time(2000)
                        console.log(`${stocks.Fruit[3]} was selected`)

                        await time(0000)
                        console.log("production has started")

                        await time(2000)
                        console.log('fruit was chopped')

                        await time(1000)
                        console.log(`${stocks.liquid[0]} and ${stocks.liquid[1]} was added`)

                        await time(1000)
                        console.log("Start the machine")

                        await time(2000)
                        console.log(`${stocks.holder[0]} was selected`)

                        await time(3000)
                        console.log(`${stocks.toppings[0]} was selected`)

                        await time(2000)
                        console.log("Ice cream served")
                    }

                    catch(error) {
                        console.log('customer tinop go oo' , error)
                    }

                    finally {
                        console.log("yapon")
                    }
                }

                kitchen()

            </script>
        </body>
    </head>
</html>

//you can follow along at https://www.freecodecamp.org/news/javascript-async-await-tutorial-learn-callbacks-promises-async-await-by-making-icecream/